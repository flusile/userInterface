#!/usr/bin/gawk -f

# Datum als dir
# h:m:s temperatur im File
# processEvent 2017-Apr-18 21:42:31 : SI 9B0008020B8D8010 27.5000
# processEvent 2017-Apr-18 21:42:31 : FussbodenRuecklauf=27


BEGIN { state="T"; }
state == "T" && /^processEvent / && $5 == "SI" {
d=$2;
t=$3;
temp=$7
state="N";
next;
}

state == "N" && /^processEvent / {
n=$5;
split(n, x, "=");
n=x[1];
state="T";

# Ausgabe:
print t, temp >>d "/" n ".dat"
}

